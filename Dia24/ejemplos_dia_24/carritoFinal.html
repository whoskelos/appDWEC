<!DOCTYPE html>
<html>

<head>
    <script>
        window.onload = function() {
            var carrito = []

            if (localStorage.getItem("compra")) carrito = JSON.parse(localStorage.getItem("compra"));
            mostrarCarrito(carrito);
        }

        function mostrarCarrito(carrito) {
            var capaCarrito = document.body;
            var total, totaltotal = 0;
            for (i = 0; i < carrito.length; i++) {
                total = parseInt(carrito[i].precio) * parseInt(carrito[i].cantidad);
                totaltotal += total;
                var parrafo = document.createElement("p");
                capaCarrito.appendChild(parrafo);
                var img = document.createElement("img");
                img.src = carrito[i].imagen;
                img.classList.add("reducida");
                parrafo.appendChild(img);
                var span = document.createElement("span");
                span.appendChild(document.createTextNode("  " + carrito[i].nombre));
                parrafo.appendChild(span);
                var span = document.createElement("span");
                span.appendChild(document.createTextNode(" " + carrito[i].cantidad));
                parrafo.appendChild(span);
                var span = document.createElement("span");
                span.appendChild(document.createTextNode("  " + total));
                parrafo.appendChild(span);
            }
            var parrafo = document.createElement("p");
            capaCarrito.appendChild(parrafo);
            var span = document.createElement("span");
            span.appendChild(document.createTextNode("TOTAL " + totaltotal));
            parrafo.appendChild(span);
        }
    </script>
</head>

<body>
    CARRITO FINAL
</body>

</html>